{% extends 'templates/basePDF.twig' %}
{% block title %}
  Dados do equipamento IMEI {{ equipment.imei }}
{% endblock %}
{% block stylesheets %}
  {{ parent() }}
  <style>
    table.slots {
      border-right: 1px dotted darkgray;
    }
  </style>
{% endblock %}
{% block content %}
  <table width="100%" class="noborder">
    <tbody>
      <tr class="title">
        <td colspan="5">
          <h1 class="title">
            Dados básicos do equipamento
          </h1>
        </td>
      </tr>
      <tr class="content">
        <td colspan="2">
          <span class="field">Modelo</span><br>
          <span class="content">{{ equipment.equipmentmodelname }}&nbsp;</span>
        </td>
        <td>
          <span class="field">Marca:</span><br>
          <span class="content">{{ equipment.equipmentbrandname }}&nbsp;</span>
        </td>
        <td>
          <span class="field">Slot disponíveis:</span><br>
          <span class="content">{{ equipment.maxsimcards }}&nbsp;</span>
        </td>
        <td>
          <span class="field">Modelo do slot:</span><br>
          <span class="content">{{ equipment.slottypename }}&nbsp;</span>
        </td>
      </tr>
      <tr class="content">
        <td colspan="2">
          <span class="field">IMEI:</span><br>
          <span class="content">{{ equipment.imei }}&nbsp;</span>
        </td>
        <td colspan="2">
          <span class="field">N&ordm; de série:</span><br>
          <span class="content">{{ equipment.serialnumber }}&nbsp;</span>
        </td>
      </tr>
      <tr class="title">
        <td colspan="5">
          <h1 class="title">
            Dados de propriedade
          </h1>
        </td>
      </tr>
      <tr class="content">
        <td rowspan="2" valign="top">
          <span class="field">Tipo de propriedade do equipamento:</span><br>
          <span class="content">{{ equipment.ownershiptypename }}&nbsp;</span>
        </td>
        <td colspan="4" style="color: black; border-bottom: 1px dotted #a0b0c0;">
          <span class="field">Dados do fornecedor</span><br>
        </td>
      </tr>
      <tr class="content">
        <td colspan="2" class="nospaced">
          {% if customer.entitytypeid == 2 %}
            <span class="field">Nome:</span><br>
          {% else %}
            <span class="field">Razão Social:</span><br>
          {% endif %}
          <span class="content">{{ equipment.suppliername }}&nbsp;</span>
        </td>
        <td colspan="2" class="nospaced">
          {% if customer.entitytypeid == 2 %}
            <span class="field">Titular:</span><br>
          {% else %}
            <span class="field">Unidade/filial:</span><br>
          {% endif %}
          <span class="content">{{ equipment.subsidiaryname }}&nbsp;</span>
        </td>
      </tr>
      {% if equipment.supplierblocked %}
      <tr class="content">
        <td colspan="5">
          <span class="content danger">Atenção: Este fornecedor encontra-se bloqueado</span>
        </td>
      </tr>
      {% endif %}
      {% if equipment.blocked %}
      <tr class="content">
        <td colspan="5">
          <span class="content danger">Atenção: Este equipamento encontra-se inativado</span>
        </td>
      </tr>
      {% endif %}
      <tr class="title">
        <td colspan="5">
          <h1 class="title">
            Informações dos slots para SIM Cards
          </h1>
        </td>
      </tr>
      <tr class="content">
        <td colspan="5">
        {% for slot in slots %}
          <table width="250px" class="slots">
            <tr>
              <td width="55px">
                {% if slot.simcardid == 0 %}
                  {% set color1 = '#cccccc' %}
                  {% set color2 = '#4d4d4d' %}
                {% else %}
                  {% set color1 = '#98ccfd' %}
                  {% set color2 = '#2a5b8a' %}
                {% endif %}
                <svg style="position: relative; top: 2px; margin: auto; text-align: center;"
                     width="50px" height="50px"
                     xmlns="http://www.w3.org/2000/svg"
                     viewBox="0 0 40 40">
                  <path d="M9 38.5C7.6 38.5 6.5 37.4 6.5 36V4C6.5 2.6 7.6 1.5 9 1.5h13.8c0.7 0 1.3 0.3 1.8 0.7l8.2 8.2C33.2 10.9 33.5 11.6 33.5 12.2V36c0 1.4-1.1 2.5-2.5 2.5z"
                    fill="{{ color1 }}"/>
                  <path d="m22.8 2c0.5 0 1 0.2 1.4 0.6l8.2 8.2C32.8 11.2 33 11.7 33 12.2V36c0 1.1-0.9 2-2 2H9C7.9 38 7 37.1 7 36V4C7 2.9 7.9 2 9 2h13.8m0-1H9C7.3 1 6 2.3 6 4v32c0 1.7 1.3 3 3 3h22c1.7 0 3-1.3 3-3V12.2c0-0.8-0.3-1.6-0.9-2.1L24.9 1.9C24.3 1.3 23.6 1 22.8 1Z"
                    fill="{{ color2 }}"/>
                  <text y="31.1" x="20" style="-inkscape-font-specification:\'Cantarell, Bold\';font-family:Cantarell;font-feature-settings:normal;font-size:25px;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-weight:bold;letter-spacing:0px;line-height:1;text-align:center;text-anchor:middle;word-spacing:0px">
                    <tspan y="31.1" x="22">{{ slot.number }}</tspan>
                  </text>
                </svg>
              </td>
              <td>
                {% if slot.simcardid == 0 %}
                  <span class="content">
                    Sem uso
                  </span>
                {% else %}
                  <span class="field">ICCID:</span><br>
                  <span class="content">
                    {{ slot.iccid }}<br>
                    <span class="field">
                      ✆ {{ slot.phonenumber }} ({{ slot.mobileoperatorname }})
                    </span>
                  </span>
                {% endif %}
              </td>
            </tr>
          </table>
        {% endfor %}
        </td>
      </tr>
      {% if equipment.attached %}
        <tr class="title">
          <td colspan="5">
            <h1 class="title">
              Dados do veículo onde o equipamento está instalado
            </h1>
          </td>
        </tr>
        <tr class="content">
          <td>
            <span class="field">Placa</span><br>
            <span class="content">{{ vehicle.plate }}&nbsp;</span>
          </td>
          <td colspan="4">
            <span class="field">Marca / Modelo:</span><br>
            <span class="content">{{ vehicle.vehiclebrandname }} / {{ vehicle.vehiclemodelname }}&nbsp;</span>
          </td>
        </tr>
        <tr class="content">
          <td>
            <span class="field">Tipo de veículo:</span><br>
            <span class="content">
              {% if vehicle.vehiclesubtypeid > 0 %}
              {{ vehicle.vehiclesubtypename }}
              {% else %}
              {{ vehicle.vehicletypename }}
              {% endif %}
              &nbsp;
            </span>
          </td>
          <td>
            <span class="field">Cor predominante:</span><br>
            <span class="content">{{ vehicle.vehiclecolorname }}&nbsp;</span>
          </td>
          <td>
            <span class="field">N&ordm; da Frota/Carro:</span><br>
            <span class="content">{{ vehicle.carnumber }}&nbsp;</span>
          </td>
          <td>
            <span class="field">RENAVAM:</span><br>
            <span class="content">{{ vehicle.renavam }}&nbsp;</span>
          </td>
          <td>
            <span class="field">Número do chassi:</span><br>
            <span class="content">{{ vehicle.vin }}&nbsp;</span>
          </td>
        </tr>
        <tr class="content">
          <td>
            <span class="field">Data de instalação:</span><br>
            <span class="content">{{ equipment.installedat }}&nbsp;</span>
          </td>
          <td colspan="4">
            <span class="field">Local da instalação:</span><br>
            <span class="content">{{ equipment.installationsite }}&nbsp;</span>
          </td>
        </tr>
      {% endif %}
    </tbody>
  </table>
{% endblock %}
